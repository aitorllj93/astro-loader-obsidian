---
import { z } from "astro:content";
import type { Document, SpaceshipConfig } from "../../types";

import Sidebar from "../Sidebar/Sidebar.astro";

import Column from "./Column.astro";
import Tabset from "./Tabset.astro";

export type Props = {
  config: SpaceshipConfig;
  document?: Document;
  backlinks?: Document[] | undefined;
  showToC?: boolean;
  showLinks?: boolean;
  showRelations?: boolean;
};

const Mode = z.union([z.literal('tabset'), z.literal('column')]).nullish().default('tabset');

const mode = Mode.parse(Astro.props.config.displayOptions?.rightSidebar?.mode);
---

<Sidebar class="hidden lg:flex" open position="right" id="right-sidebar-desktop">
  { mode === 'column' && <Column id="right-sidebar-desktop-column" {...Astro.props} />}
  { mode === 'tabset' && <Tabset id="right-sidebar-desktop-tabset" {...Astro.props} />}
</Sidebar>

<Sidebar class="flex lg:hidden" position="right" id="right-sidebar-touch">
  { mode === 'column' && <Column id="right-sidebar-touch-column" {...Astro.props} />}
  { mode === 'tabset' && <Tabset  id="right-sidebar-touch-tabset" {...Astro.props} />}
</Sidebar>
