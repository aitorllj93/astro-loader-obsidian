# astro-loader-obsidian

Use your Obsidian vault in Astro projects. Supports i18n.

## Usage

Use the loader in your Astro Content Config file.

```ts
import { defineCollection, z } from "astro:content";
import { glob } from "astro/loaders";

import { ObsidianMdLoader } from "astro-loader-obsidian";

const articles = defineCollection({
  loader: ObsidianMdLoader({
    // Optional: Default author for articles without "author" field
    author: "aitor",
    // Base Obsidian Folder
    base: "src/content/articles",
    // Optional: Support language named folders (en, es, fr, it...)
    i18n: true,
  }),
});

const authors = defineCollection({
  loader: glob({ pattern: "**/[^_]*.yaml", base: "src/content/authors" }),
  schema: z.object({
    name: z.string(),
    portfolio: z.string().url().optional(),
    avatar: z.string().url(),
  }),
});

export const collections = {
  articles,
  authors,
};
```

## Schema

You can write your own schema or use the already provided one which covers all "standard" Obsidian and Obsidian Publish fields, plus some extra autogenerated ones.

```ts
const ObsidianDocumentSchema = z.object({
  // Obsidian Frontmatter Fields
  tags: z.array(z.string()).optional(),
  aliases: z.array(z.string()).optional(),
  cssclasses: z.array(z.string()).optional(),
  publish: z.boolean().optional(),
  permalink: z.string(),
  description: z.string().optional(),
  image: z.string().optional(),
  cover: z.string().optional(),
  // Astro Blogging Fields
  title: z.string(), // Defaults to File Name
  author: z.string(), // Defaults to LoaderOptions -> author
  created: z.date(), // Defaults to Stats -> ctime
  updated: z.date(), // Defaults to Stats -> mtime
});
```

## Features

### Obsidian Links

Obsidian Links are automatically replaced with standard markdown links. By default, they will use `collection` name as base url, but you can override it with the `url` setting from the options.

### TO DO

- [ ] Replace Obsidian Links in Frontmatter
- [ ] Expose Links and Backlinks interface
- [ ] Render Inline Images
- [ ] Render Image/Cover from Frontmatter

## License

MIT
